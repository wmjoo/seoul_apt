# 서울 아파트 검색 시스템

서울시 아파트 데이터를 크롤링하고, Streamlit을 통해 다양한 조건으로 필터링하여 아파트를 검색할 수 있는 웹 애플리케이션입니다.

## 주요 기능

- 🏢 서울시 아파트 데이터 크롤링 및 정형화
- 🔍 다양한 조건별 필터링 (자치구, 건축연도, 세대수, 평형, 지하철역 거리 등)
- 📊 통계 분석 및 시각화
- 🗺️ 지도에서 아파트 위치 확인
- 📥 검색 결과 CSV 다운로드

## 데이터 필드

- **자치구**: 서울시 25개 자치구
- **주소**: 상세 주소
- **건축연도**: 아파트 건축 연도
- **세대수**: 아파트 세대 수
- **복도/계단식**: 복도식, 계단식, 혼합식
- **평형**: 전용면적 기준 평형
- **위도/경도**: 아파트 위치 좌표
- **가장 가까운 지하철역**: 가장 가까운 지하철역명
- **지하철역 거리**: 지하철역과의 직선 거리 (km)

## 설치 방법

1. 저장소 클론 또는 다운로드

```bash
cd seoul_apt
```

2. 필요한 패키지 설치

```bash
pip install -r requirements.txt
```

## 사용 방법

### 1. 환경 설정

#### API 키 설정

`.env` 파일을 생성하고 API 키를 설정하세요:

```bash
PUBLIC_DATA_API_KEY=your_public_data_api_key
SEOUL_DATA_API_KEY=your_seoul_api_key
```

또는 Streamlit Cloud의 Secrets에서 설정할 수 있습니다.

#### Streamlit Secrets 설정 (선택사항)

`.streamlit/secrets.toml` 파일을 생성하고 데이터 생성 비밀번호를 설정하세요:

```toml
data_password = "your_password_here"
```

### 2. 데이터 생성

#### 실제 데이터 수집 (권장)

서울 열린데이터광장 API를 사용하여 실제 아파트 메타데이터를 수집합니다:

```bash
python crawl_metadata.py
```

이 명령어는 `seoul_apartments_metadata.csv` 파일을 생성합니다.

#### 샘플 데이터 생성

API 키가 없거나 테스트 목적이라면 샘플 데이터를 생성할 수 있습니다:

```bash
python crawler.py
```

이 명령어는 `seoul_apartments.csv` 파일을 생성합니다.

### 2. Streamlit 앱 실행

```bash
streamlit run app.py
```

브라우저에서 자동으로 앱이 열립니다. (일반적으로 http://localhost:8501)

### 3. 필터링 사용

사이드바에서 다음 조건들을 설정할 수 있습니다:

- **자치구**: 원하는 자치구 선택
- **건축연도 범위**: 슬라이더로 연도 범위 설정
- **세대수 범위**: 슬라이더로 세대수 범위 설정
- **복도/계단식**: 복도식, 계단식, 혼합식 선택
- **평형 범위**: 슬라이더로 평형 범위 설정
- **지하철역 거리**: 지하철역과의 거리 범위 설정
- **가장 가까운 지하철역**: 특정 지하철역 선택

### 4. 결과 확인

- **목록 탭**: 필터링된 아파트 목록을 테이블로 확인
- **지도 탭**: 지도에서 아파트 위치 확인
- **통계 탭**: 다양한 통계 차트 확인

## 파일 구조

```
seoul_apt/
├── app.py                 # Streamlit 메인 앱
├── crawler.py             # 데이터 크롤링 모듈
├── utils.py               # 유틸리티 함수들
├── config.py              # 설정 파일
├── subway_stations.py     # 지하철역 좌표 데이터
├── requirements.txt       # 필요한 패키지 목록
├── README.md              # 이 파일
└── seoul_apartments.csv   # 크롤링된 데이터 (생성됨)
```

## 실제 데이터 크롤링

### 서울 열린데이터광장 Open API 사용 (권장)

1. **인증키 발급**:
   - https://data.seoul.go.kr 접속
   - 회원가입/로그인
   - 마이페이지 > 인증키 관리에서 인증키 발급

2. **인증키 설정**:
   - `.env` 파일에 `SEOUL_DATA_API_KEY=your_api_key_here` 추가
   - 또는 환경변수로 설정

3. **크롤러 실행**:
   ```bash
   python crawler.py
   ```

4. **API 사용 제한**:
   - 하루 최대 1,000회 요청 가능
   - 1회에 최대 1,000건 요청 가능
   - 제한 없이 사용하려면 활용사례(갤러리)에 등록

자세한 내용은 [API_GUIDE.md](API_GUIDE.md)를 참고하세요.

### 사용 가능한 데이터셋

- **서울시 공동주택 아파트 정보 (OA-15818)**: 아파트 메타데이터 (아파트명, 주소, 준공일자, 세대수, 세대타입 등)
- **서울시 부동산 실거래가 정보 (OA-21275)**: 실거래가 데이터

### CSV 파일 다운로드

서울 열린데이터광장에서 CSV 파일을 직접 다운로드하여 사용할 수도 있습니다:
- [아파트 정보 데이터셋](https://data.seoul.go.kr/dataList/OA-15818/A/1/datasetView.do)
- [부동산 실거래가 데이터셋](https://data.seoul.go.kr/dataList/OA-21275/S/1/datasetView.do)

## 주의사항

- 실제 웹사이트 크롤링 시 해당 사이트의 이용약관을 확인하세요
- 크롤링 요청 간 적절한 지연 시간을 두세요 (현재 1초)
- 공공데이터포털 API 사용 시 일일 호출 제한을 확인하세요

## 향후 개선 사항

- [ ] 실제 공공데이터포털 API 연동
- [ ] 네이버/다음 부동산 크롤링 구현
- [ ] 실거래가 정보 추가
- [ ] 학교, 병원 등 주변 시설 정보 추가
- [ ] 가격 정보 및 추세 분석
- [ ] 즐겨찾기 기능
- [ ] 비교 기능

## 라이선스

이 프로젝트는 교육 및 개인 사용 목적으로 제작되었습니다.

## 문의

문제가 발생하거나 개선 사항이 있으면 이슈를 등록해주세요.

