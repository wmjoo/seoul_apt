# 서울 열린데이터광장 Open API 사용 가이드

## 인증키 발급 방법

1. **서울 열린데이터광장 접속**
   - https://data.seoul.go.kr 접속

2. **회원가입/로그인**
   - 회원가입이 필요합니다 (무료)

3. **인증키 발급**
   - 마이페이지 > 인증키 관리
   - 또는 Open API 소개 페이지에서 인증키 발급

4. **인증키 설정**
   - 발급받은 인증키를 `.env` 파일에 추가:
   ```env
   SEOUL_DATA_API_KEY=your_api_key_here
   ```

## API 사용 제한 사항

### ⚠️ 중요 제한사항

1. **하루 요청 제한**
   - 하루 최대 **1,000회** 요청 가능
   - 활용사례(갤러리)에 등록하면 제한 없이 사용 가능

2. **1회 요청 제한**
   - 1회에 최대 **1,000건** 요청 가능
   - 1,000건 이상은 나누어서 호출해야 함

3. **요청 형식**
   ```
   http://openapi.seoul.go.kr:8088/{인증키}/json/{서비스명}/{시작인덱스}/{종료인덱스}
   ```

## 사용 가능한 데이터셋

### 1. 서울시 공동주택 아파트 정보 (OA-15818)
- **데이터셋 ID**: OA-15818
- **포함 정보**: 아파트명, 주소, 준공일자, 세대수, 세대타입, 연면적, 건설사 등
- **서비스명**: `tbLnOpendataAptInfo` (예상)
- **용도**: 아파트 메타데이터 수집

### 2. 서울시 부동산 실거래가 정보 (OA-21275)
- **데이터셋 ID**: OA-21275
- **포함 정보**: 실거래가, 보증금, 월세, 신고년도 등
- **서비스명**: `tbLnOpendataRentV` (예상)
- **용도**: 실거래가 데이터 수집

## 크롤러 사용 예시

### 기본 사용법

```python
from crawler import SeoulApartmentCrawler

crawler = SeoulApartmentCrawler()

# 아파트 정보 크롤링 (최대 1,000건씩)
df = crawler.crawl_seoul_apartment_info(start_index=1, end_index=1000)

# 전체 데이터 크롤링 (자동으로 나누어서 호출)
df_all = crawler.crawl_seoul_apartment_info_all(max_records=5000)
```

### API 호출 제한 고려사항

```python
# 하루 1,000회 제한을 고려하여 사용
# 예: 10,000건을 수집하려면 최소 10회 호출 필요
# (1회에 1,000건씩)

# 크롤러는 자동으로 배치 단위로 나누어 호출합니다
df = crawler.crawl_seoul_apartment_info_all(max_records=10000)
```

## 활용사례 등록 (제한 해제)

제한 없이 사용하려면:

1. **활용사례 등록**
   - 서울 열린데이터광장 > 활용사례(갤러리)
   - 인증키와 함께 콘텐츠 등록
   - 등록 후 제한 없이 사용 가능

2. **등록 시 포함할 내용**
   - 프로젝트 설명
   - 사용 목적
   - 인증키 정보
   - 결과물 스크린샷 등

## 문제 해결

### API 키 오류
- 인증키가 올바르게 설정되었는지 확인
- `.env` 파일에 올바른 형식으로 입력되었는지 확인

### 요청 제한 오류
- 하루 1,000회 제한을 초과했는지 확인
- 다음 날 다시 시도하거나 활용사례 등록

### 데이터 없음 오류
- 서비스명이 올바른지 확인 (데이터셋마다 다를 수 있음)
- 시작/종료 인덱스가 올바른지 확인

## 참고 링크

- 서울 열린데이터광장: https://data.seoul.go.kr
- Open API 소개: https://data.seoul.go.kr/together/openapi
- 활용사례 갤러리: https://data.seoul.go.kr/together/gallery

